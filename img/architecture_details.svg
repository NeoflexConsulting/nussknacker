<!--http://www.plantuml.com/plantuml/uml/NPB1JiCm38RFyrDOEoAD2IGk5K8JJA09mGNn02PrkwXjKX87c2RU7JVjOAE7rlR_rVxZTXM5WgIkXTXOrrEW3WCR8LUtZ7j0lO9FhhppmN70ooluXcX8nOjpJK2iQFoSOcmScKOH2cPhHNkam03mrsr-HCsH8hgZj_OmEo9VDnb8zgIwSS9r8B7UnQmRNxBwWVV4IVL7gXewoqepX7Ww_hwrhibgDKGdsXDBi6RisetnFqiFWIfob8bwZ65Maj0RnUojQjFN-ZRhDYU3CyYZy7fnCragrBIBgUDb7toPZAueMTKL6D42I-vRlrkQBPlcHKXIN4Rn_SJzzX6EijRvX_faky0Fovz3KLicEt8mR0eNmq8dxvfCBiUnWu73mGkCx4g0bcjzOh3rLY0l5wr-DI_OaTEZ-x031KOCLdhJ7-a7-->
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="616.25px" preserveAspectRatio="none" style="width:533px;height:616px;" version="1.1" viewBox="0 0 533 616" width="533.75px" zoomAndPan="magnify"><defs><filter height="300%" id="f1rhwol0411tqq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.5"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="5.0" dy="5.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="22.5" lengthAdjust="spacingAndGlyphs" textLength="278.75" x="126.25" y="20.885">Nussknacker architecture</text><!--cluster nussknacker--><rect fill="#FFFFFF" filter="url(#f1rhwol0411tqq)" height="108.75" rx="15.625" ry="15.625" style="stroke: #000000; stroke-width: 2.5;" width="322.5" x="88.125" y="56.1914"/><text fill="#000000" font-family="sans-serif" font-size="17.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127.5" x="185.625" y="74.9353">Nussknacker</text><!--cluster metrics--><rect fill="#FFFFFF" filter="url(#f1rhwol0411tqq)" height="140" rx="15.625" ry="15.625" style="stroke: #000000; stroke-width: 2.5;" width="315" x="163.125" y="377.4414"/><text fill="#000000" font-family="sans-serif" font-size="17.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72.5" x="284.375" y="396.1853">Metrics</text><!--entity ui--><rect fill="#FEFECE" filter="url(#f1rhwol0411tqq)" height="45.3711" rx="15.625" ry="15.625" style="stroke: #000000; stroke-width: 1.875;" width="41.25" x="280" y="99.9414"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="16.25" x="292.5" y="128.6853">UI</text><!--entity code--><rect fill="#FEFECE" filter="url(#f1rhwol0411tqq)" height="45.3711" rx="15.625" ry="15.625" style="stroke: #000000; stroke-width: 1.875;" width="127.5" x="108.125" y="99.9414"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="102.5" x="120.625" y="128.6853">Integrations</text><!--entity grafana--><rect fill="#FEFECE" filter="url(#f1rhwol0411tqq)" height="45.3711" rx="15.625" ry="15.625" style="stroke: #000000; stroke-width: 1.875;" width="91.25" x="217.5" y="436.8164"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="66.25" x="230" y="465.5603">Grafana</text><!--entity influx--><path d="M353.125,443.6914 C353.125,431.1914 400.625,431.1914 400.625,431.1914 C400.625,431.1914 448.125,431.1914 448.125,443.6914 L448.125,475.3125 C448.125,487.8125 400.625,487.8125 400.625,487.8125 C400.625,487.8125 353.125,487.8125 353.125,475.3125 L353.125,443.6914 " fill="#FEFECE" filter="url(#f1rhwol0411tqq)" style="stroke: #000000; stroke-width: 1.875;"/><path d="M353.125,443.6914 C353.125,456.1914 400.625,456.1914 400.625,456.1914 C400.625,456.1914 448.125,456.1914 448.125,443.6914 " fill="none" style="stroke: #000000; stroke-width: 1.875;"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="70" x="365.625" y="477.4353">InfluxDB</text><!--entity kafka--><path d="M266.875,249.9414 L334.375,249.9414 C340.625,249.9414 340.625,266.377 340.625,266.377 C340.625,266.377 340.625,282.8125 334.375,282.8125 L266.875,282.8125 C260.625,282.8125 260.625,266.377 260.625,266.377 C260.625,266.377 260.625,249.9414 266.875,249.9414 " fill="#FEFECE" filter="url(#f1rhwol0411tqq)" style="stroke: #A80036; stroke-width: 1.875;"/><path d="M334.375,249.9414 C328.125,249.9414 328.125,266.377 328.125,266.377 C328.125,282.8125 334.375,282.8125 334.375,282.8125 " fill="none" style="stroke: #A80036; stroke-width: 1.875;"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="55" x="266.875" y="272.4353">Kafka*</text><!--entity flink--><rect fill="#FEFECE" filter="url(#f1rhwol0411tqq)" height="45.3711" rx="15.625" ry="15.625" style="stroke: #000000; stroke-width: 1.875;" width="63.75" x="7.5" y="243.6914"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="38.75" x="20" y="272.4353">Flink</text><!--link flink to kafka--><path d="M77.7638,266.1914 C124.4639,266.1914 203.28,266.1914 253.5837,266.1914 " fill="none" id="flink-kafka" style="stroke: #A80036; stroke-width: 1.25;"/><polygon fill="#A80036" points="260.1813,266.1914,248.9313,261.1914,253.9313,266.1914,248.9313,271.1914,260.1813,266.1914" style="stroke: #A80036; stroke-width: 1.25;"/><polygon fill="#A80036" points="71.4094,266.1914,82.6594,271.1914,77.6594,266.1914,82.6594,261.1914,71.4094,266.1914" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="143.75" x="94.0625" y="257.525">consume/produce</text><!--link ui to flink--><path d="M284.315,150.5314 C277.1375,159.9252 267.83,169.4814 256.875,174.9414 C223.9975,191.3264 123.6565,166.5214 91.875,184.9414 C71.8596,196.5427 58.0848,219.1952 49.6838,237.4427 " fill="none" id="ui-flink" style="stroke: #A80036; stroke-width: 1.25;"/><polygon fill="#A80036" points="47.0395,243.4402,56.1552,235.1657,49.5624,237.722,47.0061,231.1291,47.0395,243.4402" style="stroke: #A80036; stroke-width: 1.25;"/><polygon fill="#A80036" points="288.08,145.3564,277.4193,151.5136,284.4038,150.4109,285.5065,157.3955,288.08,145.3564" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="196.25" x="93.125" y="201.275">deploy/checkStatus/stop</text><!--link ui to kafka--><path d="M300.625,151.5389 C300.625,181.0002 300.625,226.3964 300.625,249.8152 " fill="none" id="ui-kafka" style="stroke: #A80036; stroke-width: 1.25;"/><polygon fill="#A80036" points="300.625,145.1439,295.625,156.3939,300.625,151.3939,305.625,156.3939,300.625,145.1439" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="70" x="301.875" y="201.275">testData</text><!--link ui to metrics--><path d="M327.15,135.2189 C346.5775,145.2527 371.5013,161.8339 383.125,184.9414 C397.5463,213.6102 389.0037,257.3864 361.875,288.6914 C309.8463,348.7289 248.2913,296.8789 196.875,357.4414 C193.2738,361.6833 190.1964,366.3734 187.5689,371.3409 C186.912,372.5828 186.2833,373.842 185.6814,375.1159 C185.3805,375.7528 185.0864,376.3935 184.7988,377.0374 " fill="none" id="ui-metrics" style="stroke: #A80036; stroke-width: 1.25;"/><polygon fill="#A80036" points="321.3175,132.3139,329.1595,141.8042,326.9123,135.0997,333.6168,132.8525,321.3175,132.3139" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="33.75" x="388.125" y="271.9">view</text><!--link ui to ui--><path d="M321.3925,111.7364 C342.1,105.6327 365,109.2014 365,122.4414 C365,134.3364 346.515,138.4252 327.7438,134.7077 " fill="none" id="ui-ui" style="stroke: #A80036; stroke-width: 1.25;"/><polygon fill="#A80036" points="321.3925,133.1464,331.1248,140.6859,327.462,134.6375,333.5105,130.9747,321.3925,133.1464" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="31.25" x="372.5" y="128.15">test</text><!--link code to ui--><path d="M235.7475,122.4414 C250.4463,122.4414 265.145,122.4414 279.8438,122.4414 " fill="none" id="code-ui" style="stroke: #A80036; stroke-width: 1.25;"/><!--link grafana to influx--><path d="M308.7788,459.3164 C323.4888,459.3164 338.1988,459.3164 352.9088,459.3164 " fill="none" id="grafana-influx" style="stroke: #A80036; stroke-width: 1.25;"/><!--link flink to metrics--><path d="M54.4579,288.9377 C71.6741,313.4752 100.69,354.8298 125.7196,390.5029 C138.2344,408.3395 149.7526,424.7558 158.301,436.9394 C159.3696,438.4623 160.3917,439.9191 161.3636,441.3043 C161.8496,441.9969 162.323,442.6716 162.7833,443.3277 " fill="none" id="flink-metrics" style="stroke: #A80036; stroke-width: 1.25;"/><polygon fill="#A80036" points="162.7833,443.3277,160.4148,431.2466,159.1935,438.2114,152.2287,436.9902,162.7833,443.3277" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="38.75" x="95.625" y="342.525">send</text><rect fill="#DDDDDD" height="32.8711" rx="6.25" ry="6.25" style="stroke: #000000; stroke-width: 1.25;" width="210" x="310" y="569.9414"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="195" x="317.5" y="592.4353">Kafka is not mandatory</text><!--
@startuml
skinparam rectangle {
    roundCorner 25
}
scale 1.25

title Nussknacker architecture


rectangle "Nussknacker" as nussknacker {
	rectangle "UI" as ui
	rectangle "Integrations" as code
}

queue "Kafka*" as kafka


rectangle "Flink" as flink

rectangle "Metrics" as metrics {
	rectangle "Grafana" as grafana
	database "InfluxDB" as influx
}


flink <-> kafka : consume/produce

ui <- -> flink : deploy/checkStatus/stop
ui <- - kafka : testData
ui <- - metrics: view
ui -> ui: test
code - ui
grafana - influx
flink - -> metrics : send

legend right
Kafka is not mandatory
endlegend
@enduml

PlantUML version 1.2017.16beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g><AutoScroll xmlns="http://www.w3.org/1999/xhtml"></AutoScroll></svg>